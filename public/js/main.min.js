function chatCtrl(e,a){var t=this,s=a();t.messages=e.getMessages(),t.showMessages=e.showMessages(),t.sendMessage=function(){if(null!=t.author)var a={authorName:t.author.displayName,authorId:t.author.uid,authorPhoto:t.author.photoURL,text:t.newMessage};else alert("Санала зарегистрируйтесь");""!=t.newMessage?(e.sendMessage(a),t.newMessage=""):alert("введите сообщение")},t.login=function(){s.$signInWithPopup("google")},t.logout=function(){s.$signOut()},s.$onAuthStateChanged(function(e){t.author=e}),t.newMessage=""}function chatService(e){var a=firebase.database().ref().child("messages"),t={};return t.getMessages=function(){return e(a)},t.showMessages=function(){return e(a.limitToLast(30))},t.sendMessage=function(e){t.getMessages().$add(e)},t}function enterSender(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.enterSender)}),a.preventDefault())})}}window.app=angular.module("firebaseChat",["firebase"]);var config={apiKey:"AIzaSyB5iNWqGaY3r9hkdvjmbbNvez5lnQKg2IY",authDomain:"fibasechat.firebaseapp.com",databaseURL:"https://fibasechat.firebaseio.com",storageBucket:"fibasechat.appspot.com",messagingSenderId:"829036329929"};firebase.initializeApp(config),app.controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),app.factory("ChatService",["$firebaseArray",chatService]),app.directive("enterSender",[enterSender]);